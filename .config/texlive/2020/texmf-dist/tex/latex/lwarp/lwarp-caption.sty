%%
%% This is file `lwarp-caption.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% lwarp.dtx  (with options: `caption')
%% This is a generated file.
%% Copyright 2016-2020 Brian Dunn
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.

\typeout{---}
\typeout{Packages lwarp and caption:}
\typeout{If a ``Missing \protect\begin\protect{document\protect}'' error occurs here,}
\typeout{try using: \space \protect\usepackage\protect{caption\protect}\space%
    \protect\captionsetup{options}}
\typeout{instead of: \protect\usepackage[options]\protect{caption\protect}.}
\typeout{---}

\LWR@ProvidesPackagePass{caption}[2020/01/03]

\long\def\caption@iibox@#1#2#3#4{%
  \caption@iiibox{#1}{#2}{#3}%
        []%                             lwarp
        [\captionbox@hj@default]%
        {{#4}}%                         lwarp
}
\long\def\caption@iiiibox#1#2#3#4#5[#6][#7]#8{%
  \begingroup
  #1*% set \caption@position
  \caption@iftop{%
    \endgroup
    \minipagefullwidth%
    \parbox[t]{\linewidth}{%
      #1\relax
      \caption@setposition t%
            {\caption#4{#5}}%
      #8%
    }%
  }{%
    \endgroup
    \minipagefullwidth%
    \parbox[b]{\linewidth}{%
      #1\relax
      \caption@setposition b%
      #8%
            {\caption#4{#5}}%
    }%
  }%
}

\renewcommand\caption@@@make[2]{%
\LWR@traceinfo{caption@@@make}%
    \LWR@stoppars%                              lwarp
  \caption@ifempty{#2}{%
    \let\caption@lsep\@empty
    \let\caption@tfmt\@firstofone
  }%
  \caption@applyfont
    {\ifcaption@star\else
       \begingroup
        \captionlabelfont
         \LWR@isolate{#1}%                      lwarp
       \endgroup
     \fi}%
    {\ifcaption@star\else
       \begingroup
         \caption@iflf\captionlabelfont
         \relax
        \caption@lsep
       \endgroup
     \fi}%
    {{%
        \captiontextfont
        \let\\\newline%                         lwarp
        \LWR@isolate{\caption@tfmt{#2}}%        lwarp
      }}%
    \LWR@startpars%                              lwarp
\LWR@traceinfo{caption@@@make done}%
}

\renewcommand{\caption@@make@}[2]{%
  \caption@stepthecounter%
  \caption@beginhook%
      \caption@@@make{#1}{#2}%
  \caption@endhook%
}

\long\def\caption@makecaption#1#2{%
  \caption@@make{#1}{#2}%
}

\AtBeginDocument{
    \let\@makecaption\caption@makecaption
}

\AtBeginDocument{
  \def\@xfloat#1[#2]{%
    \caption@ORI@xfloat{#1}[#2]%
    \caption@settype{#1}%
    \LWR@futurenonspacelet\LWR@mynexttoken\LWR@floatalignment%
  }%
  \def\@xdblfloat#1[#2]{%
    \caption@ORI@xfloat{#1}[#2]%
    \caption@settype{#1}%
    \LWR@futurenonspacelet\LWR@mynexttoken\LWR@floatalignment%
  }%
}

\long\def\caption@lsep@default{.~}
\long\def\caption@lsep@colon{:~}
\long\def\caption@lsep@period{.~}
\long\def\caption@lsep@space{~}
\long\def\caption@lsep@endash{~\textendash~}
\long\def\caption@lsep@arabi{~:~}

\DeclareCaptionBox{none}{#2}
\DeclareCaptionBox{parbox}{%
    #2%
}

\DeclareCaptionBox{colorbox}{%
    #2%
}

\endinput
%%
%% End of file `lwarp-caption.sty'.
